<meta charset="utf-8"/>
<div class="col-md-12" style="padding:0;margin-top:20px;">
	<div class="portlet light ">
		<div class="portlet-title">
			<div class="caption">
				<span class="caption-subject bold uppercase font-dark">患者列表</span>
			</div>
			<div class="actions">
				<span>查  询</span>
				<div class="input-group"
					 style="display:inline-table;vertical-align:middle;margin-left:10px;width:250px;">
					<input type="text" id="find" name="find" class="form-control" placeholder="姓名" onkeydown="onKeyDown(event)">
					<span class="input-group-btn">
                        <button onclick="looking()" class="btn btn-default" type="button">
                            <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </span>
				</div>
			</div>
		</div>
		<div class="portlet-content" style="overflow:hidden;">
			<table>
				<thead>
				<tr>
					<th>姓名</th>
					<th>年龄</th>
					<th>性别</th>
					<th>电话</th>
					<th>地址</th>
					<th>状态</th>
					<th colspan="3">操作</th>
				</tr>
				</thead>
				<tbody>
				@ for(item in rs.List){
				<tr>
					<td>${item.basicInfo.name}</td>
					<td>${item.basicInfo.age}</td>
					<td>${item.basicInfo.sex}</td>
					<td>${item.basicInfo.telephone}</td>
					<td>${item.basicInfo.address}</td>
					<td><span class="ing">${item.status}</span></td>
					<td><a class="text-danger" onclick="zdemr('${item.patientNo}','${item.visitNo}')">诊断</a></td>
					<td><a class="text-primary" onclick="showemr('{emr.id}')">详细</a></td>
					<td><a class="text-success" onclick="editemr('{emr.id}')">修改</a></td>
					<td><a class="text-danger" onclick="delemr('{emr.id}')">删除</a></td>
				</tr>
				@}


				</tbody>
			</table>
			<!-- <div class="page_and_btn">{emr.page.pageStr}</div>-->
		</div>
	</div>
</div>
<div class="page pull-right ">
	<div class="col-md-12 column ">
		<!--仅有1页-->
		@if(rs.totalPageCount==1){
		<ul class="pagination pagination-sm pull-left">
			<li class="disabled">
				<a href="#">首页</a>
			</li>
			<li class="disabled">
				<a href="#">上一页</a>
			</li>
			<li class="disabled">
				<a href="#">下一页</a>
			</li>
			<li class="disabled">
				<a href="#">尾页</a>
			</li>
			<li class="disabled">
				<a href="#">当前是第${rs.pageCount}页,共计${rs.totalPageCount}页</a>
			</li>
		</ul>
		@}
		<!--仅有2页-->
		@if(rs.totalPageCount==2){
		@if(rs.pageCount == 1){
		<ul class="pagination pagination-sm pull-left">
			<li class="disabled">
				<a href="#">首页</a>
			</li>
			<li class="disabled">
				<a href="#">上一页</a>
			</li>
			<li>
				<a href="#" onclick="page(this)">下一页</a>
			</li>
			<li>
				<a href="#" onclick="page(this)">尾页</a>
			</li>
			<li class="disabled">
				<a href="#">当前是第${rs.pageCount}页,共计${rs.totalPageCount}页</a>
			</li>
		</ul>
		@}
		@else{
		<ul class="pagination pagination-sm pull-left">
			<li>
				<a href="#" onclick="page(this)">首页</a>
			</li>
			<li>
				<a href="#" onclick="page(this)">上一页</a>
			</li>
			<li class="disabled">
				<a href="#">下一页</a>
			</li>
			<li class="disabled">
				<a href="#">尾页</a>
			</li>
			<li class="disabled">
				<a href="#">当前是第${rs.pageCount}页,共计${rs.totalPageCount}页</a>
			</li>
		</ul>
		@}

		@}
		<!--大于等于3页-->
		@if(rs.totalPageCount>2){
		@if(rs.pageCount == 1){
		<ul class="pagination pagination-sm pull-left">
			<li class="disabled">
				<a href="#">首页</a>
			</li>
			<li class="disabled">
				<a href="#">上一页</a>
			</li>
			<li>
				<a href="#" onclick="page(this)">下一页</a>
			</li>
			<li>
				<a href="#" onclick="page(this)">尾页</a>
			</li>
			<li class="disabled">
				<a href="#">当前是第${rs.pageCount}页,共计${rs.totalPageCount}页</a>
			</li>
		</ul>
		@ }
		@else if(rs.pageCount == 2){
		<ul class="pagination pagination-sm pull-left">
			<li>
				<a href="#" onclick="page(this)">首页</a>
			</li>
			<li>
				<a href="#" onclick="page()">上一页</a>
			</li>
			<li>
				<a href="#" onclick="page(this)">下一页</a>
			</li>
			<li>
				<a href="#" onclick="page(this)">尾页</a>
			</li>
			<li class="disabled">
				<a href="#">当前是第${rs.pageCount}页,共计${rs.totalPageCount}页</a>
			</li>
		</ul>
		@}
		@else if(rs.pageCount >2 && rs.pageCount< rs.totalPageCount){
		<ul class="pagination pagination-sm pull-left">
			<li>
				<a href="#" onclick="page(this)">首页</a>
			</li>
			<li>
				<a href="#" onclick="page()">上一页</a>
			</li>
			<li>
				<a href="#" onclick="page2(this)">${rs.pageCount-1}</a>
			</li>
			<li>
				<a href="#" onclick="page2(this)">${rs.pageCount}</a>
			</li>
			<li>
				<a href="#" onclick="page2(this)">${rs.pageCount+1}</a>
			</li>
			<li>
				<a href="#" onclick="page(this)">下一页</a>
			</li>
			<li>
				<a href="#" onclick="page(this)">尾页</a>
			</li>
			<li class="disabled">
				<a href="#">当前是第${rs.pageCount}页,共计${rs.totalPageCount}页</a>
			</li>
		</ul>
		@}
		@else{
		<ul class="pagination pagination-sm pull-left">
			<li>
				<a href="#" onclick="page(this)">首页</a>
			</li>
			<li>
				<a href="#" onclick="page(this)">上一页</a>
			</li>
			<li class="disabled">
				<a href="#">下一页</a>
			</li>
			<li class="disabled">
				<a href="#">尾页</a>
			</li>
			<li class="disabled">
				<a href="#">当前是第${rs.pageCount}页,共计${rs.totalPageCount}页</a>
			</li>
		</ul>
		@}
		@}
	</div>
</div>

<div>
	<input hidden type="text" name="key1" id="key1" value="${rs.keyWord_1}">
	<input hidden type="text" name="key2" id="key2" value="${rs.keyWord_2}">
	<input hidden type="text" name="currentPage" id="currentPage" value="${rs.pageCount}">
	<input hidden type="text" name="totalPage" id="totalPage" value="${rs.totalPageCount}">
</div>

<!--<div class="col-md-12" style="padding:0;">-->
	<!--<div class="portlet light">-->
		<!--<div class="portlet-title">-->
			<!--<div class="caption">-->
				<!--<span class="caption-subject bold uppercase font-dark">统计分析</span>-->
			<!--</div>-->
		<!--</div>-->
		<!--<div class="portlet-content">-->

			<!--<div class="row">-->
				<!--&lt;!&ndash; 折线图 &ndash;&gt;-->
				<!--<div class="main col-md-6">-->
					<!--<select>-->
						<!--<option>全国</option>-->
						<!--<option>四川</option>-->
					<!--</select>-->
					<!--<div id="main" style="height:260px;"></div>-->
				<!--</div>-->
				<!--&lt;!&ndash; 柱状图 &ndash;&gt;-->
				<!--<div class="main col-md-6">-->
					<!--<select>-->
						<!--<option>全国</option>-->
						<!--<option>四川</option>-->
					<!--</select>-->
					<!--<div id="main1" style="height:260px;"></div>-->
				<!--</div>-->
			<!--</div>-->
		<!--</div>-->
	<!--</div>-->
<!--</div>-->
</div>

<script src="bootstrap/js/echarts.js" type="text/javascript"></script>
<script>
    function zdemr(patientNo, visitNo) {
        console.log(visitNo)
        $("#right_content").load("${request.contextPath}/treatment/patient?patientNo=" + patientNo + "&visitNo=" + visitNo);
    }

    // 分页查询
    function page(obj) {
        var k = $(obj).text();
        var toPage = "";
        if (k == "下一页") {
            toPage = Number($("input[name=currentPage]").val()) + 1;
        }
        if (k == "上一页") {
            toPage = Number($("input[name=currentPage]").val()) - 1;
        }
        if (k == "尾页") {
            toPage = Number($("input[name=totalPage]").val());
        }
        if (k == "首页") {
            toPage = 1;
        }

        var url = "${request.contextPath}/Mypatient?currentPage=" + toPage
            + "&key2=" + $("input[name=key2]").val()
            + "&key1=" + $("input[name=key1]").val();
        $("#right_content").load(url);
    }

    function page2(obj) {
        var k = Number($(obj).text());
        var url = "${request.contextPath}/Mypatient?currentPage=" + k
            + "&key2=" + $("input[name=key2]").val()
            + "&key1=" + $("input[name=key1]").val();
        $("#right_content").load(url);
    }
    //搜索
    function looking() {
        var k = $("input[name=find]").val();
        var k2 = "all_patient"
        var url = "${request.contextPath}/Mypatient?key1="+k+"&key2="+k2;
        $("#right_content").load(url);
    }
    function onKeyDown(event){
        var e = event || window.event || arguments.callee.caller.arguments[0];
        if(e && e.keyCode==13){ // enter 键
            looking();
        }
    }
</script>

<style>
	body {
		background-color: #5C9BD1;
	}

	.page-sidebar .page-sidebar-menu > li.active.open > a, .page-sidebar .page-sidebar-menu > li.active > a, .page-sidebar-closed.page-sidebar-fixed .page-sidebar:hover .page-sidebar-menu > li.active.open > a, .page-sidebar-closed.page-sidebar-fixed .page-sidebar:hover .page-sidebar-menu > li.active > a {
		background: #5C9BD1;
		color: #fff;
	}

	.page-sidebar, .page-sidebar-closed.page-sidebar-fixed .page-sidebar:hover {
		background-color: #5C9BD1;
	}

	li a {
		color: white;
		font-size: 16px;
	}

	.profile-userpic img {
		float: none;
		margin: 0 auto;
		width: 50%;
		height: 50%;
		-webkit-border-radius: 50% !important;
		-moz-border-radius: 50% !important;
		border-radius: 50% !important;
	}

	.page-header.navbar .page-logo {
		background: #74AFE7;
	}

	.portlet-content table {
		width: 100%;
	}

	.portlet-content table th, .portlet-content table td {
		text-align: center;
		line-height: 40px;
	}

	.portlet-content table thead {
		border-bottom: 1px solid #ccc;
	}

	.portlet-content table td span.ing {
		color: #E8AB35;
	}

	.portlet-content table tbody tr:nth-child(even) {
		background: #F9FAFE;
	}

	.main {
		border: 1px green solid;
		margin: 0.5%;
		width: 49%;
		display: inline-block;
		position: relative;
	}

	canvas {
		width: unset !important;
	}

	select {
		position: absolute;
		top: 10px;
	}

</style>